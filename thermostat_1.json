{
  "alias": "thermostat_1",
  "name": "Thermostat 1",
  "descriptor": {
    "type": "rpc",
    "sizeX": 8,
    "sizeY": 8,
    "resources": [],
    "templateHtml": "<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\"\n      rel=\"stylesheet\">\n\n<div class=\"thermostat\">\n  <div class=\"bar\">\n    <div class=\"inner_bar\"></div>\n    <div class='hold left'>\n      <div class='fill fill1'></div>\n    </div>\n    <div class='hold right'>\n      <div class='fill fill2'></div>\n    </div>\n    <span>Heating</span>\n  </div>\n  <div class=\"shadow\">\n    <div class=\"shadow-cube\"></div>\n  </div>\n  <div class=\"number\">\n    <span class=\"ext\">19</span>\n  </div>\n  <div class=\"center\">\n    <span class=\" minus\"><i class=\"material-icons\">keyboard_arrow_left</i></span>\n    <span class=\" plus\"><i class=\"material-icons\">keyboard_arrow_right</i></span>\n    <div class=\"small\">\n      <span class=\"heat\">19</span>\n    </div>\n  </div>\n</div>",
    "templateCss": "@charset \"UTF-8\";\n\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700\");\n\n\n#container {\n\n    top: 50%;\n     transform: translate(-50%, -50%);\n    position: absolute;\n  left: 50%;\n}\n\n\n\n* {\n\tbox-sizing: border-box;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n}\n\nhtml, body {\n\tmargin: 0;\n\tbackground: #fdfdfd;\n\tfont-family: 'Open Sans', sans-serif;\n}\n\n.center_radius, .thermostat, .thermostat .bar, .thermostat .center, .thermostat .center .small {\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tborder-radius: 50%;\n}\n\n.thermostat {\n\tposition: absolute;\n\twidth: 400px;\n\theight: 400px;\n\tbackground: #6D697F;\n\tbox-shadow: inset 0px -6px 1px 2px rgba(0, 0, 0, 0.35), 0px 7px 40px 11px rgba(84, 81, 97, 0.4);\n}\n\n.thermostat:hover .number {\n\topacity: 1;\n}\n\n.thermostat .shadow {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%) rotateZ(10deg);\n\twidth: 25px;\n\theight: 86%;\n\ttext-align: center;\n\ttransition: 0.7s ease;\n\tanimation: shadow 1.4s ease-out both;\n}\n\n.thermostat .shadow .shadow-cube {\n\tposition: absolute;\n\ttop: 0;\n\twidth: 25px;\n\theight: 0px;\n\tbox-shadow: 0 0 45px 13px rgba(255, 158, 35, 0.5);\n}\n\n.thermostat .number {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%) rotateZ(10deg);\n\twidth: 40px;\n\theight: 82%;\n\ttext-align: center;\n\ttransition: 0.7s ease;\n\topacity: 0;\n}\n\n.thermostat .number .ext {\n\tfont-size: 16px;\n\tcolor: white;\n\tfont-weight: 1000;\n\ttext-shadow: 1px 3px 3px #302e38;\n}\n\n.thermostat .bar {\n\tposition: absolute;\n\twidth: 356px;\n\theight: 356px;\n}\n\n.thermostat .bar .inner_bar {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\twidth: 344px;\n\theight: 344px;\n\tmargin-left: -172px;\n\tmargin-top: -172px;\n\tborder-radius: 100%;\n\tbackground-color: #6D697F;\n\tz-index: 4;\n}\n\n.thermostat .bar .inner_bar:after {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\twidth: 0;\n\theight: 0;\n\tborder-top: 70px solid transparent;\n\tborder-left: 70px solid transparent;\n\tborder-right: 70px solid transparent;\n\tborder-bottom: 150px solid #6D697F;\n\tbottom: -7px;\n\tleft: 50%;\n\ttransform: translatex(-50%);\n}\n\n.thermostat .bar .hold {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tclip: rect(0px, 356px, 356px, 178px);\n\tborder-radius: 100%;\n\tbackground-color: #3a3749;\n}\n\n.thermostat .bar .fill {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 100%;\n\tclip: rect(0px, 178px, 356px, 0px);\n}\n\n.thermostat .bar .fill1 {\n\tbackground: -webkit-linear-gradient(top, #FF4900 20%, #FF4900 100%);\n}\n\n.thermostat .bar .fill2 {\n\tbackground: -webkit-linear-gradient(top, #FF4900 40%, #FF9E23 100%);\n}\n\n.thermostat .bar .right {\n\tz-index: 3;\n\t-webkit-transform: rotate(180deg);\n\t-moz-transform: rotate(180deg);\n\ttransform: rotate(180deg);\n}\n\n.thermostat .bar .right .fill {\n\tz-index: 3;\n\ttransform: rotate(180deg);\n\tanimation: right 1s linear both;\n\ttransition: transform 0.6s;\n}\n\n.thermostat .bar .left .fill {\n\tz-index: 1;\n\tanimation: left 0.3s linear both;\n\tanimation-delay: 1s;\n\ttransition: transform 0.6s;\n}\n\n.thermostat .bar span {\n\twidth: 356px;\n\tfont-weight: 800;\n\tposition: absolute;\n\tbottom: 0px;\n\ttext-align: center;\n\ttext-transform: uppercase;\n\tfont-size: 15px;\n\tcolor: #2e2c3a;\n\tz-index: 10;\n}\n\n.thermostat .center {\n\tposition: absolute;\n\twidth: 260px;\n\theight: 260px;\n\tbackground: #e3e4ed;\n\tanimation: bound-in 0.6s ease forwards;\n}\n\n.thermostat .center:hover .arrow {\n\topacity: 1;\n\ttransition: opacity 0.3s;\n}\n\n.thermostat .center:hover .minus {\n\tleft: 10px;\n\ttransition: left 0.3s ease-out;\n}\n\n.thermostat .center:hover .plus {\n\tright: 45px;\n\ttransition: right 0.3s ease-out;\n}\n\n.thermostat .center span i {\n\tposition: absolute;\n\tcolor: #b9b6c8;\n\tfont-size: 40px;\n\tfont-weight: 500;\n\tline-height: 260px;\n}\n\n.thermostat .center .arrow {\n\topacity: 0;\n\ttransition: opacity 0.3s;\n\tcursor: pointer;\n}\n\n.thermostat .center .minus {\n\tposition: absolute;\n\tanimation: arrow-left 1s forwards;\n}\n\n.thermostat .center .plus {\n\tposition: absolute;\n\tanimation: arrow-right 1s forwards;\n}\n\n.thermostat .center .small {\n\tposition: absolute;\n\twidth: 150px;\n\theight: 150px;\n\tbackground: #F8F9FA;\n\ttext-align: center;\n\tanimation: bound-in-small 0.6s ease forwards;\n}\n\n.thermostat .center .small .heat {\n\tline-height: 150px;\n\tfont-size: 59px;\n\tcolor: #57545f;\n\tfont-weight: 300;\n}\n\n.thermostat .center .small .heat:after {\n\tcontent: 'Â°';\n\tdisplay: block;\n\tposition: absolute;\n\tfont-size: 40px;\n\ttop: -20px;\n\tright: 30px;\n}\n\n@-webkit-keyframes shadow {\n\t0% {\n\t\ttransform: translate(-50%, -50%) rotate(-190deg);\n\t}\n\n\t100% {\n\t\ttransform: translate(-50%, -50%) rotate(10deg);\n\t}\n}\n\n@-webkit-keyframes right {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\n\t100% {\n\t\ttransform: rotate(180deg);\n\t}\n}\n\n@-webkit-keyframes left {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\n\t100% {\n\t\ttransform: rotate(10deg);\n\t}\n}\n\n@-webkit-keyframes bound-in {\n\t10% {\n\t\tbox-shadow: 0px 7px 30px 5px rgba(96, 93, 111, 0.25);\n\t\ttransform: translate(-50%, -50%) scale(0.8);\n\t}\n\n\t80% {\n\t\ttransform: translate(-50%, -50%) scale(1.03);\n\t}\n\n\t100% {\n\t\tbox-shadow: 0px 15px 35px 11px rgba(46, 44, 58, 0.6);\n\t\ttransform: translate(-50%, -50%) scale(1);\n\t}\n}\n\n@-webkit-keyframes bound-in-small {\n\t0% {\n\t\tbox-shadow: 0px 5px 10px 5px rgba(96, 93, 111, 0.19);\n\t\ttransform: translate(-50%, -50%) scale(0.8);\n\t}\n\n\t80% {\n\t\ttransform: translate(-50%, -50%) scale(1.03);\n\t}\n\n\t100% {\n\t\tbox-shadow: 0px 15px 35px 5px rgba(96, 93, 111, 0.3);\n\t\ttransform: translate(-50%, -50%) scale(1);\n\t}\n}\n\n@-webkit-keyframes arrow-left {\n\t0% {\n\t\tleft: 45px;\n\t\topacity: 0;\n\t}\n\n\t100% {\n\t\tleft: 10px;\n\t\topacity: 1;\n\t}\n}\n\n@-webkit-keyframes arrow-right {\n\t0% {\n\t\tright: 75px;\n\t\topacity: 0;\n\t}\n\n\t100% {\n\t\tright: 45px;\n\t\topacity: 1;\n\t}\n}\n ",
    "controllerScript": "\n\nself.onInit = function() {\nvar gradi = 10;\nvar max = 34;\nvar min = 2;\nupdateGr()\nvar settings = self.ctx.settings;\nfunction updateGr(){\n    \n  $('.heat', self.ctx.$container).text(\"\" + gradi);\n  $('.ext', self.ctx.$container).text(\"\" + gradi);\n  $('.number', self.ctx.$container).css(\"transform\", \"translate(-50%, -50%) rotate(\"+ (-180 + gradi * 10)+\"deg)\");\n  $('.shadow', self.ctx.$container).css(\"transform\", \"translate(-50%, -50%) rotate(\"+ (-180 + gradi * 10)+\"deg)\");\n  $('.fill', self.ctx.$container).css(\"animation\", \"none\");\n  $('.hadow', self.ctx.$container).css(\"animation\", \"none\");\n  \n  \n  if(gradi > 19){\n      $('.fill1', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - 18 - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }else if(gradi == 19){\n      $('.fill1', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - 18 - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"1s\"); \n    }else{\n      $('.fill2', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }\n  \n\n}\n\n\n$('.minus', self.ctx.$container).mousedown(function(){ \n  if(gradi > min){\n    gradi--;\n    updateGr();\n    if(gradi >= 18){\n      $('.fill1', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - 18 - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }else if(gradi == 17){\n      $('.fill2', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi  - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0.5s\");  \n    }else{\n      $('.fill2', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi  - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }\n    \n      \n  sendValue();\n  }\n});\n\n$('.plus', self.ctx.$container).mousedown(function(){\n  if(gradi < max){\n    gradi++;\n    updateGr();\n    if(gradi > 19){\n      $('.fill1', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - 18  - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }else if(gradi == 19){\n      $('.fill1', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi - 18  - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"1s\"); \n    }else{\n      $('.fill2', self.ctx.$container).css(\"transform\", \"rotate(\"+ (gradi  - (min - 2)) * 10 +\"deg)\").css(\"transition-delay\", \"0s\");\n    }\n    \n      \n  sendValue();\n  }  \n});\n\nfunction requestStatus() {\n    method = settings.statusRequestMethod;\n    timeout = settings.requestTimeout;\n    paramsBody = \"\";\n    self.ctx.controlApi.sendTwoWayCommand(method, \n                        paramsBody, \n                        timeout)\n        .subscribe(\n            function success(responseBody) {\n                   gradi = parseFloat(responseBody);    \n                   updateGr();\n                }\n                );\n}\n\n\n    sendValue = function() {\n        var method = settings.changeRequestMethod;\n        \n        var paramsBody = gradi;\n        \n        \n       \n        self.ctx.controlApi.sendTwoWayCommand(method, \n                                    paramsBody, settings.requestTimeout)\n                    .subscribe(\n                        function success(responseBody) {\n                            \n                        }\n                    );\n}\n\n\nrequestStatus();\n}\n\n\n\nself.onResize = function() {\n    if (self.ctx.height < self.ctx.width)\n $('.thermostat', self.ctx.$container)[0].style.zoom =  1*(self.ctx.height / 410);\n    else\n     $('.thermostat', self.ctx.$container)[0].style.zoom =  1*(self.ctx.width / 410);\n}\n\nself.onDestroy = function() {\n}\n",
    "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n           \n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 500\n            },\n            \"statusRequestMethod\": {\n                \"title\": \"Status request Method\",\n                \"type\": \"string\",\n                \"default\": \"getValue\"\n            },\n            \"changeRequestMethod\": {\n                \"title\": \"Change request Method\",\n                \"type\": \"string\",\n                \"default\": \"setValue\"\n            },\n        \"required\": [\n                     \"requestTimeout\",\n                     \"statusRequestMethod\",\n                      \"changeRequestMethod\"\n                     ]\n        }\n    },\n    \"form\": [\"requestTimeout\",\n    \"statusRequestMethod\",\n     \"changeRequestMethod\"\n    ]\n\n}",
    "dataKeySettingsSchema": "{}\n",
    "defaultConfig": "{\"targetDeviceAliases\":[],\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"parseGpioStatusFunction\":\"return body[pin] === true;\",\"gpioStatusChangeRequest\":{\"method\":\"setGpioStatus\",\"paramsBody\":\"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"},\"requestTimeout\":500,\"switchPanelBackgroundColor\":\"#b71c1c\",\"gpioStatusRequest\":{\"method\":\"getGpioStatus\",\"paramsBody\":\"{}\"},\"gpioList\":[{\"pin\":1,\"label\":\"GPIO 1\",\"row\":0,\"col\":0,\"_uniqueKey\":0},{\"pin\":2,\"label\":\"GPIO 2\",\"row\":0,\"col\":1,\"_uniqueKey\":1},{\"pin\":3,\"label\":\"GPIO 3\",\"row\":1,\"col\":0,\"_uniqueKey\":2}]},\"title\":\"Thermostat 1\"}"
  },
  "image": null,
  "description": null
}